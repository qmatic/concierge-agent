<div class="qm-select-branch qm-flow-sub-header" dir="{{ userDirection$ | async}}">
  <div class="qm-flow-sub-header__left">
    <h1>{{ 'select_branch_header' | translate}}</h1>

    <div class="qm-selected-box" *ngIf="currentBranch && currentBranch.publicId">
      <div class="qm-selected-box__heading">{{ 'label.selected.branch' | translate }}</div>
      
      <div class="qm-selected-box__content">
          {{ currentBranch.name }}
          <i aria-hidden="true" class="icon-delete" (click)="deselectBranch()"></i>
      </div>
    </div>

    <div class="qm-search qm-search--large">
      <label class="sr-only" for="branchSearchInput">{{'branch_search_placeholder' | translate}}</label>
      <input [(ngModel)]="searchText" qmClearInput (input)="handleInput($event)" class="qm-search__input ng-pristine ng-valid ng-touched"
        id="branchSearchInput" name="q" type="search" placeholder="{{'branch_search_placeholder' | translate}}">

      <button *ngIf="(searchText || '').trim().length === 0" class="qm-action-btn qm-action-btn--only-icon qm-search__btn">
        <i aria-hidden="true" class="qm-action-btn__icon icon-search qm-search__icon"></i>
        <span class="sr-only">Search</span>
      </button>
    </div>
  </div>

  <div class="qm-flow-sub-header__right">
    <div class="qm-checkbox__container">
      <label for="qm-checkbox" class="qm-checkbox-label">
        <input id="qm-checkbox" class="qm-checkbox" type="checkbox" (change)="onSwitchChange()" [(ngModel)]="isFlowSkip">
        <div class="qm-checkbox__selector">
          <i aria-hidden="true" class="qm-checkbox__selector-icon"></i>
          <div class="qm-checkbox__selector-icon-text">{{ 'label.skip.branch' | translate }}</div>
        </div>
      </label>
      <button  type="button" class="qm-action-btn qm-action-btn--only-icon qm-option__help-btn qm-tooltip-btn">
        <i class="qm-action-btn__icon icon-help" aria-hidden="true"></i>
        <span class="qm-tooltip"> {{ 'tooltip.branch.skip' | translate}}</span>
      </button>
    </div>
  </div>
</div>
<div class="qm-branch-list__container" dir="{{ userDirection$ | async}}">

  <div class="qm-crossline-header-container">
    <div class="qm-crossline-header"></div>
    <h2 class="qm-crossline-header-text">{{ 'label.branch.allbranches' | translate }}</h2>
  </div>

  <div class="qm-select-branch__search-heading" *ngIf="(searchText || '').trim().length > 0">
    <span>{{'label.search.result.header' | translate}} &nbsp;</span>
    <mark>{{ '"'+ searchText + '"' }}</mark>
  </div>

  <div class="qm-list">
    <div *ngFor="let b of calendarBranches | filterBranch : filterText" class="qm-branch-list__item qm-list__item" (click)="onToggleBranchSelection(b)"
      [ngClass]="{'qm-branch-list__item--selected, qm-list__item--selected': b.publicId === currentBranch.publicId}">
      <div class="qm-branch-list__item--text qm-list__item--text" [innerHtml]="b.name | qmhighlight: searchText"></div>
    </div>
  </div>
</div>
